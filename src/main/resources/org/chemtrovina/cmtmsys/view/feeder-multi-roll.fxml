<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.geometry.Insets?>
<AnchorPane prefHeight="720.0" prefWidth="1000.0"
            xmlns="http://javafx.com/javafx/23.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.chemtrovina.cmtmsys.controller.FeederMultiRollController">

    <VBox spacing="10"
          AnchorPane.topAnchor="10" AnchorPane.leftAnchor="10"
          AnchorPane.rightAnchor="10" AnchorPane.bottomAnchor="10">

        <!-- ================== TIÃŠU Äá»€ ================== -->
        <Label text="ðŸ“‹ Quáº£n lÃ½ Gáº¯n Cuá»™n cho Feeder"
               style="-fx-font-size: 18px; -fx-font-weight: bold;"/>

        <!-- ================== NHáº¬P MODEL ================== -->
        <TitledPane text="ðŸ”§ ThÃ´ng tin Model" expanded="true">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="MÃ£ Model:"/>
                <TextField fx:id="txtModelCode"
                           promptText="Nháº­p hoáº·c quÃ©t mÃ£ model..."
                           prefWidth="150"/>

                <Label text="TÃªn Model:"/>
                <TextField fx:id="txtModelName"
                           promptText="Nháº­p tÃªn model..."
                           prefWidth="200"/>

                <Label text="Loáº¡i Model:"/>
                <ComboBox fx:id="cbModelType"
                          promptText="Chá»n loáº¡i model"
                          prefWidth="150"/>

                <Label text="Line:"/>
                <ComboBox fx:id="cbLines"
                          promptText="Chá»n line"
                          prefWidth="180"/>

                <Button fx:id="btnLoadFeeders"
                        text="ðŸš€ Táº£i Feeders"
                        style="-fx-font-weight: bold;"/>
            </HBox>
        </TitledPane>

        <!-- ================== PHIÃŠN CHáº Y ================== -->
        <HBox spacing="10" alignment="CENTER_LEFT">
            <Label text="PhiÃªn cháº¡y:"/>
            <ComboBox fx:id="cbRunHistory" promptText="Chá»n phiÃªn" prefWidth="180"/>
            <Button fx:id="btnCreateRun" text="âž• Táº¡o phiÃªn má»›i"/>
            <Button fx:id="btnToggleRun" text="ON/OFF"/>
        </HBox>

        <!-- ================== Báº¢NG FEEDER ================== -->
        <TableView fx:id="tblFeederAssignments" prefHeight="360.0">
            <columns>
                <TableColumn fx:id="colFeederCode" text="Feeder Code" prefWidth="100"/>
                <TableColumn fx:id="colMachine" text="Machine" prefWidth="100"/>
                <TableColumn fx:id="colSapCode" text="SAP Code" prefWidth="100"/>
                <TableColumn fx:id="colFeederQty" text="Feeder Qty" prefWidth="80"/>
                <TableColumn fx:id="colRollCode" text="Cuá»™n Ä‘ang gáº¯n" prefWidth="150"/>
                <TableColumn fx:id="colMaterialQty" text="SL Cuá»™n" prefWidth="80"/>
                <TableColumn fx:id="colStatus" text="Tráº¡ng thÃ¡i" prefWidth="120"/>
            </columns>
        </TableView>

        <!-- ================== KHU Vá»°C DÆ¯á»šI ================== -->
        <SplitPane dividerPositions="0.55">
            <!-- BÃŠN TRÃI: Gáº®N CUá»˜N / FEEDER -->
            <VBox spacing="10">
                <padding>
                    <Insets bottom="5" left="5" right="5" top="5" />
                </padding>
                <Label text="âš™ï¸ Gáº¯n hoáº·c tÃ¬m Feeder" style="-fx-font-weight: bold;"/>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Scan FeederCode:"/>
                    <TextField fx:id="txtSearchFeederCode"
                               promptText="QuÃ©t mÃ£ Feeder..."
                               prefWidth="200"/>
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Scan RollCode Ä‘á»ƒ Gáº®N:"/>
                    <TextField fx:id="txtRollCode"
                               promptText="QuÃ©t mÃ£ cuá»™n Ä‘á»ƒ gáº¯n vÃ o feeder"
                               prefWidth="200"/>
                </HBox>

                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Scan RollCode Ä‘á»ƒ tÃ¬m Feeder theo SAP:"/>
                    <TextField fx:id="txtScanRollForSap"
                               promptText="QuÃ©t mÃ£ cuá»™n..."
                               prefWidth="200"/>
                </HBox>

                <TableView fx:id="tblFeederBySap" prefHeight="250" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colFeederCodeBySap" text="Feeder Code" prefWidth="100"/>
                        <TableColumn fx:id="colSapCodeBySap" text="SAP Code" prefWidth="100"/>
                        <TableColumn fx:id="colRollCodeBySap" text="Roll Code"/>
                        <TableColumn fx:id="colQtyBySap" text="Qty"/>
                        <TableColumn fx:id="colStatusBySap" text="Tráº¡ng thÃ¡i" prefWidth="100"/>
                        <TableColumn fx:id="colAttachButton" text="Gáº¯n" prefWidth="60"/>
                        <TableColumn fx:id="colDeleteButton" text="XÃ³a" prefWidth="60"/>
                    </columns>
                </TableView>
            </VBox>

            <!-- BÃŠN PHáº¢I: XE / CÃ‚Y -->
            <VBox spacing="10">
                <padding>
                    <Insets bottom="5" left="5" right="5" top="5" />
                </padding>
                <Label text="ðŸ“¦ TÃ¬m cuá»™n theo Xe / CÃ¢y" style="-fx-font-weight: bold;"/>
                <HBox spacing="5" alignment="CENTER_LEFT">
                    <Label text="Xe cÃ¢y:"/>
                    <ComboBox fx:id="cbTruckCode" prefWidth="100" promptText="Chá»n mÃ£ xe..."/>
                    <Label text="MÃ£ cÃ¢y:"/>
                    <TextField fx:id="txtTreeCode" promptText="Nháº­p mÃ£ cÃ¢y..." prefWidth="100"/>
                    <Label text="MÃ£ cuá»™n:"/>
                    <TextField fx:id="txtRollCodeSearch" promptText="Nháº­p mÃ£ cuá»™n..." prefWidth="100"/>
                    <Label text="SAP Code:"/>
                    <TextField fx:id="txtSapSearch" promptText="SAP..." prefWidth="100"/>
                    <Button fx:id="btnSearchTree" text="ðŸ”"/>
                </HBox>

                <TitledPane text="ðŸ“„ Danh sÃ¡ch CÃ¢y trong Xe Ä‘Ã£ chá»n" expanded="true">
                    <TableView fx:id="tblTreeList" prefHeight="120">
                        <columns>
                            <TableColumn fx:id="colTreeCode" text="MÃ£ CÃ¢y"/>
                            <TableColumn fx:id="colCreatedDate" text="NgÃ y táº¡o"/>
                            <TableColumn fx:id="colFloor" text="Táº§ng"/>
                        </columns>
                    </TableView>
                </TitledPane>

                <TitledPane text="ðŸ“¦ Danh sÃ¡ch Cuá»™n trong CÃ¢y Ä‘Ã£ chá»n" expanded="true">
                    <TableView fx:id="tblRollInTree" prefHeight="120">
                        <columns>
                            <TableColumn fx:id="colRollCodeInTree" text="MÃ£ Cuá»™n"/>
                            <TableColumn fx:id="colSapCodeInTree" text="SAP Code"/>
                            <TableColumn fx:id="colQtyInTree" text="Sá»‘ lÆ°á»£ng"/>
                            <TableColumn fx:id="colWarehouseInTree" text="Kho"/>
                        </columns>
                    </TableView>
                </TitledPane>
            </VBox>
        </SplitPane>

        <!-- ================== LOG ================== -->
        <TitledPane text="ðŸ§¾ Nháº­t kÃ½ thao tÃ¡c" expanded="true">
            <TextArea fx:id="txtStatusLog"
                      editable="false"
                      wrapText="true"
                      prefHeight="100"
                      style="-fx-font-family: Consolas; -fx-font-size: 12px;"/>
        </TitledPane>
    </VBox>
</AnchorPane>
