<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.control.TitledPane?>
<?import javafx.scene.control.ScrollPane?>
<BorderPane prefHeight="650.0" prefWidth="1200.0"
            stylesheets="@../css/timeLog.css"
            xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="org.chemtrovina.cmtmsys.controller.TimeAttendanceController">

    <top>
        <VBox spacing="10.0">
            <padding>
                <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <children>
                    <Label text="Lá»c theo ngÃ y:" style="-fx-font-weight: bold;" />
                    <Label text="NgÃ y:" />
                    <DatePicker fx:id="dpScanDate" promptText="YYYY-MM-DD" />
                    <Button fx:id="btnFilterDate" text="Lá»c" />
                    <Button fx:id="btnClearDateFilter" text="XÃ³a lá»c" />
                </children>
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="10.0">
                <children>
                    <Label text="Scan Äiá»ƒm Danh:" style="-fx-font-weight: bold;" />

                    <TextField fx:id="txtScanInput"
                               prefWidth="200.0"
                               promptText="Nháº­p MÃ£ tháº» / MÃ£ NV vÃ  Enter" />
                    <Button fx:id="btnScan" text="SCAN" />
                    <HBox spacing="20">
                        <Button fx:id="btnIn" text="IN"
                                style="-fx-font-size: 18px; -fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-weight: bold;" />

                        <Button fx:id="btnOut" text="OUT"
                                style="-fx-font-size: 18px; -fx-background-color: #9E9E9E; -fx-text-fill: white; -fx-font-weight: bold;" />

                        <Label fx:id="lblScanType"
                               text="TYPE: NONE"
                               style="-fx-font-size: 22px; -fx-font-weight: bold;" />
                    </HBox>


                    <Label fx:id="lblScanStatus" text="Sáºµn sÃ ng" style="-fx-text-fill: green; -fx-font-weight: bold;" />
                </children>
            </HBox>
        </VBox>
    </top>

    <center>
        <VBox spacing="10.0">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>
            <!-- PANE 1: Báº¢NG ÄIá»‚M DANH -->
            <TitledPane text="Danh sÃ¡ch Ä‘iá»ƒm danh" expanded="true" VBox.vgrow="ALWAYS">
                <content>
                    <ScrollPane
                            fitToHeight="true"
                            fitToWidth="false"
                            pannable="true"
                            hbarPolicy="AS_NEEDED"
                            vbarPolicy="AS_NEEDED">

                        <TableView fx:id="tblTimeAttendanceLog"
                                   prefWidth="1800"
                                   VBox.vgrow="ALWAYS">
                            <columns>

                                <TableColumn text="No">
                                    <columns>
                                        <TableColumn fx:id="colNo" prefWidth="40.0" text="STT" />
                                    </columns>
                                </TableColumn>

                                <TableColumn fx:id="colInput"
                                             id="colVang"
                                             styleClass="header-yellow"
                                             text="Cá»˜T NHáº¬P" />

                                <TableColumn text="Full Name">
                                    <columns>
                                        <TableColumn fx:id="colFullName"
                                                     prefWidth="150.0"
                                                     text="Há»Œ VÃ€ TÃŠN" />
                                    </columns>
                                </TableColumn>

                                <TableColumn fx:id="colCompany" text="CÃ´ng Ty" />
                                <TableColumn fx:id="colDepartment" text="Bá»™ pháº­n" />
                                <TableColumn fx:id="colGender" text="Giá»›i tÃ­nh" />
                                <TableColumn fx:id="colPosition" text="Chá»©c vá»¥" />

                                <TableColumn fx:id="colNote"
                                             prefWidth="250.0"
                                             id="colVang"
                                             styleClass="header-yellow"
                                             text="LÃ DO Váº®NG/TRá»„/Cáº®T TÃŠN" />

                                <TableColumn fx:id="colJobTitle" text="CÃ´ng viá»‡c" />
                                <TableColumn fx:id="colManager"
                                             id="colVang"
                                             styleClass="header-yellow"
                                             text="Quáº£n lÃ½" />

                                <TableColumn fx:id="colDateOfBirth" text="NgÃ y sinh" />
                                <TableColumn fx:id="colEntryDate" text="NgÃ y vÃ o" />
                                <TableColumn fx:id="colShift" text="Ca chuyá»ƒn Ä‘á»•i" />
                                <TableColumn fx:id="colPhoneNumber" text="Sá»‘ Ä‘iá»‡n thoáº¡i" />

                                <TableColumn fx:id="colY" prefWidth="30.0" text="Ca" />
                                <TableColumn fx:id="colIn"  id="colVang" styleClass="header-yellow" text="IN" />
                                <TableColumn fx:id="colOut" id="colVang" styleClass="header-yellow" text="OUT" />
                                <TableColumn fx:id="colScanDate" text="NgÃ y" />

                            </columns>
                        </TableView>

                    </ScrollPane>
                </content>
            </TitledPane>

            <!-- PANE 2: SUMMARY (DÃ™NG SAU) -->
            <TitledPane text="Tá»•ng há»£p / Thá»‘ng kÃª" expanded="true">
                <content>
                    <HBox spacing="25" alignment="CENTER_LEFT">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>

                        <Label text="Tá»•ng nhÃ¢n sá»±:"/>
                        <Label fx:id="lblTotalEmployee"
                               text="0"
                               style="-fx-font-weight: bold"/>

                        <Label text="ÄÃ£ Ä‘i lÃ m:"/>
                        <Label fx:id="lblTotalIn"
                               text="0"
                               style="-fx-font-weight: bold; -fx-text-fill: green"/>

                        <Label text="KhÃ´ng Ä‘i lÃ m:"/>
                        <!-- CLICKABLE -->
                        <Label fx:id="lblAbsentCount"
                               text="0"
                               style="-fx-font-weight: bold;
                          -fx-text-fill: red;
                          -fx-underline: true;
                          -fx-cursor: hand"/>
                    </HBox>
                </content>
            </TitledPane>

            <TitledPane fx:id="tpAbsentList"
                        text="Danh sÃ¡ch khÃ´ng Ä‘i lÃ m"
                        expanded="false">

                <content>
                    <VBox spacing="10">
                        <padding>
                            <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>

                        <TableView fx:id="tblAbsentEmployees"
                                   editable="true"
                                   prefHeight="300">

                            <columns>
                                <TableColumn fx:id="colAbsentNo" text="No" />
                                <TableColumn fx:id="colAbsentCode" text="Code" />
                                <TableColumn fx:id="colAbsentName" text="Name" />
                                <TableColumn fx:id="colAbsentDept" text="Department" />
                                <TableColumn fx:id="colAbsentShift" text="Shift" />
                                <TableColumn fx:id="colAbsentNote" text="Note" />
                            </columns>
                        </TableView>

                        <HBox alignment="CENTER_RIGHT" spacing="10">
                            <Button fx:id="btnSaveAbsentNote"
                                    text="ðŸ’¾ LÆ°u lÃ½ do nghá»‰"/>
                        </HBox>
                    </VBox>
                </content>
            </TitledPane>

        </VBox>
    </center>

</BorderPane>